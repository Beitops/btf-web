---
import OptimizedImage from './OptimizedImage.astro';
import FacturinBanner from '../facturin/FacturinBanner1.png';
---

<section class="bg-white px-6 py-12">
	<div class="max-w-6xl mx-auto">
		<div class="bg-primary rounded-[40px] px-8 py-10 md:px-40 md:py-12 relative">
			<div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
				<div class="text-left">
					<h2 class="text-2xl md:text-3xl font-bold text-black leading-tight">
						Pagar lo justo en tu factura de luz, nunca fue tan f√°cil
					</h2>
					<button
						type="button"
						class="mt-6 inline-flex items-center justify-center bg-black text-white px-6 py-3 rounded-full font-semibold tracking-wide transition-transform duration-200 hover:scale-[1.02]"
						data-scroll-to-hero
					>
						ANALIZA TU FACTURA
					</button>
				</div>
				<div class="flex items-end justify-center md:justify-end min-h-[160px] h-full">
					<div class="relative z-10">
						<slot />
					</div>
					<OptimizedImage
						class="absolute bottom-0 right-1/4 md:right-68 w-40 h-40 md:w-48 md:h-48"
						src={FacturinBanner}
						alt="Facturin banner"
						loading="lazy"
					/>
				</div>
			</div>
		</div>
	</div>
</section>

<script>
	const scrollButton = document.querySelector('[data-scroll-to-hero]');

	scrollButton?.addEventListener('click', () => {
		const hero = document.getElementById('hero');
		if (!hero) return;

		const targetY = hero.getBoundingClientRect().top + window.scrollY;
		const startY = window.scrollY;
		const distance = targetY - startY;
		const duration = 300;
		const startTime = performance.now();

		const easeOutCubic = (t: number) => 1 - Math.pow(1 - t, 3);

		const step = (now: number) => {
			const elapsed = now - startTime;
			const progress = Math.min(elapsed / duration, 1);
			const eased = easeOutCubic(progress);
			window.scrollTo(0, startY + distance * eased);
			if (progress < 1) {
				requestAnimationFrame(step);
			}
		};

		requestAnimationFrame(step);
	});
</script>
